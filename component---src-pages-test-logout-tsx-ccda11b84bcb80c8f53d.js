"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1026],{303:function(e,t,n){n.d(t,{k:function(){return c}});var a=n(6540),l=n(5268),o=n(3),r=n(6898),s=n(599),i=n(6634);t.A=e=>{let{route:t}=e;const{0:n,1:u}=(0,a.useState)({email:"",password:"",remember:!1}),{0:m,1:d}=(0,a.useState)("");(0,a.useEffect)(()=>{r.ND.auth.getSession().then(e=>{var t,n,a;let{data:l}=e;const o=null===(t=l.session)||void 0===t||null===(n=t.user)||void 0===n||null===(a=n.user_metadata)||void 0===a?void 0:a.role;l.session&&g(o)})},[]);const g=e=>{var n,a;return e&&null!=t&&null!==(n=t[e])&&void 0!==n&&n.onTrue?(0,l.navigate)(t[e].onTrue):e&&null!=t&&null!==(a=t[e])&&void 0!==a&&a.onFalse?(0,l.navigate)(t[e].onFalse):void(0,l.navigate)("/event/aid/checkout")},f=async()=>{var e,t,n;const{data:a}=await r.ND.auth.getSession();(0,i.Uf)();const l=null===(e=a.session)||void 0===e||null===(t=e.user)||void 0===t||null===(n=t.user_metadata)||void 0===n?void 0:n.role;d("Login successful"),setTimeout(()=>g(l),900)},p=e=>{d(e||"Invalid credentials")},y=e=>{const{name:t,value:n,type:a,checked:l}=e.target;u(e=>({...e,[t]:"checkbox"===a?l:n}))},v=c;return a.createElement("div",{style:v.page},a.createElement("div",{style:v.card},a.createElement("div",{style:v.header},a.createElement("h1",{style:v.logo},"AID"),a.createElement("p",{style:v.tagline},"A.I. Director")),a.createElement("form",{onSubmit:e=>{e.preventDefault(),(0,i.ID)(),Object.keys(localStorage).forEach(e=>{e.startsWith("sb-")&&localStorage.removeItem(e)}),(0,s.mg)({email:n.email,password:n.password,onSuccess:f,onFail:p})},style:v.form},a.createElement("div",{style:v.field},a.createElement("label",{style:v.label},"Email"),a.createElement("input",{style:v.input,type:"email",name:"email",value:n.email,onChange:y,required:!0})),a.createElement("div",{style:v.field},a.createElement("label",{style:v.label},"Password"),a.createElement("input",{style:v.input,type:"password",name:"password",value:n.password,onChange:y,required:!0})),a.createElement("div",{style:v.row},a.createElement("label",{style:v.checkbox},a.createElement("input",{type:"checkbox",name:"remember",checked:n.remember,onChange:y}),"Remember me"),a.createElement("a",{href:"/reset-password",style:v.link},"Forgot?")),a.createElement("button",{type:"submit",style:v.button},"Sign In ",a.createElement(o.dyV,null)),m&&a.createElement("div",{style:v.message},m)),a.createElement("div",{style:v.footer},"Donâ€™t have an account? ",a.createElement("a",{href:"/sign-up",style:v.link},"Create one"))))};const c={page:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#ffffff",color:"black",fontFamily:"-apple-system, BlinkMacSystemFont, SF Pro Text, Helvetica Neue, Arial"},card:{width:380,padding:"2.5rem",borderRadius:16,border:"1px solid #e5e5e7",background:"#fff"},header:{marginBottom:"2rem",textAlign:"center"},logo:{margin:0,fontSize:"1.8rem",fontWeight:600},tagline:{marginTop:6,fontSize:"0.9rem",color:"#000"},form:{display:"flex",flexDirection:"column",gap:"1.2rem"},field:{display:"flex",flexDirection:"column"},label:{fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600,marginBottom:6,letterSpacing:"0.05em",color:"black"},input:{padding:"0.7rem",borderRadius:8,border:"1px solid #d2d2d7",fontSize:"0.9rem"},row:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.85rem"},checkbox:{display:"flex",alignItems:"center",gap:6},button:{marginTop:"1rem",padding:"0.8rem",borderRadius:10,border:"none",background:"#000",color:"#fff",fontSize:"0.95rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},link:{color:"#000",textDecoration:"none"},footer:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.85rem",color:"#000"},message:{marginTop:10,textAlign:"center",fontSize:"0.85rem"}}},599:function(e,t,n){n.d(t,{T4:function(){return i},mg:function(){return s},tp:function(){return c},vM:function(){return r},vx:function(){return o}});var a=n(6634),l=n(6898);const o=async function(e){let{onSuccess:t,onFail:n}=void 0===e?{}:e;console.log("ðŸ” Logging outâ€¦"),(0,a.nR)();const{error:o}=await l.ND.auth.signOut();if(o)return console.error("âŒ Logout error:",o),null==n?void 0:n(o.message);(0,a.nR)(),localStorage.removeItem("__thv_valid_supabase_keys__"),null==t||t()},r=async e=>{let{email:t,password:n,fullName:a,onSuccess:o,onFail:r}=e;const{data:s,error:i}=await l.ND.auth.signUp({email:t,password:n,options:{data:{full_name:a||"unknown",signup_source:"thv-web"}}});i?null==r||r(i.message):null==o||o()},s=async e=>{let{email:t,password:n,onSuccess:a,onFail:o}=e;const{data:r,error:s}=await l.ND.auth.signInWithPassword({email:t,password:n});s?null==o||o(s.message):null==a||a()},i=async e=>{let{email:t,onSuccess:n,onFail:a}=e;const{data:o,error:r}=await l.ND.auth.resetPasswordForEmail(t);r?null==a||a(r.message):null==n||n()},c=async e=>{let{newPassword:t,onSuccess:n,onFail:a}=e;const{data:o,error:r}=await l.ND.auth.updateUser({password:t});r?null==a||a(r.message):null==n||n()}},3282:function(e,t,n){n.r(t);var a=n(6540),l=n(4735);t.default=()=>a.createElement(l.A,null)},4735:function(e,t,n){var a=n(6540),l=n(5268),o=n(599),r=n(303);const s={EN:{brandTitle:"TINH HOA VIá»†T",tagline:"Where Vietnamese Excellence Meets Global Recognition",loggingOut:"Logging you out securelyâ€¦",success:"",fail:"âŒ Logout failed. Please try again."},VN:{brandTitle:"TINH HOA VIá»†T",tagline:"NÆ¡i tÃ´n vinh tinh hoa Viá»‡t Nam vÆ°Æ¡n táº§m quá»‘c táº¿",loggingOut:"Äang Ä‘Äƒng xuáº¥t an toÃ nâ€¦",success:"âœ… Báº¡n Ä‘Ã£ Ä‘Äƒng xuáº¥t thÃ nh cÃ´ng.",fail:"âŒ ÄÄƒng xuáº¥t tháº¥t báº¡i. Vui lÃ²ng thá»­ láº¡i."}};t.A=()=>{const{0:e}=(0,a.useState)("EN"),t=s[e],{0:n,1:i}=(0,a.useState)(t.loggingOut);(0,a.useEffect)(()=>{(0,o.vx)({onSuccess:()=>{i(t.success),setTimeout(()=>(0,l.navigate)("/"),1500)},onFail:()=>{i(t.fail)}})},[]);const c=r.k;return a.createElement("div",{style:c.page},a.createElement("div",{style:c.card},a.createElement("div",{style:c.header},a.createElement("h1",{style:c.logo},"AID"),a.createElement("p",{style:c.tagline},t.tagline)),a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:14,marginTop:10}},a.createElement("div",{style:{width:28,height:28,borderRadius:"50%",border:"2px solid #d2d2d7",borderTopColor:"#000",animation:"spin 0.9s linear infinite"}}),a.createElement("div",{style:c.message},n))),a.createElement("style",null,"\n          @keyframes spin {\n            to { transform: rotate(360deg); }\n          }\n        "))}},6634:function(e,t,n){function a(){return Object.keys(localStorage).filter(e=>e.startsWith("sb-")&&e.includes("-auth-token"))}function l(){const e=a();if(0===e.length)return;const t={};e.forEach(e=>t[e]=localStorage.getItem(e)||""),localStorage.setItem("__thv_valid_supabase_keys__",JSON.stringify(t))}function o(){const e=localStorage.getItem("__thv_valid_supabase_keys__");if(!e)return;const t=JSON.parse(e);Object.keys(t).forEach(e=>{localStorage.getItem(e)||(console.log("ðŸ›  Restoring missing Supabase key:",e),localStorage.setItem(e,t[e]))})}function r(){const e=JSON.parse(localStorage.getItem("__thv_valid_supabase_keys__")||"{}");a().forEach(t=>{e[t]||(console.log("ðŸ§¨ Removing stale Supabase key:",t),localStorage.removeItem(t))})}n.d(t,{ID:function(){return o},Uf:function(){return l},nR:function(){return r}})}}]);
//# sourceMappingURL=component---src-pages-test-logout-tsx-ccda11b84bcb80c8f53d.js.map