"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2412],{303:function(e,t,n){n.d(t,{k:function(){return c}});var a=n(6540),o=n(5268),r=n(3),l=n(6898),s=n(599),i=n(6634);t.A=e=>{let{route:t}=e;const{0:n,1:u}=(0,a.useState)({email:"",password:"",remember:!1}),{0:m,1:d}=(0,a.useState)("");(0,a.useEffect)(()=>{l.ND.auth.getSession().then(e=>{var t,n,a;let{data:o}=e;const r=null===(t=o.session)||void 0===t||null===(n=t.user)||void 0===n||null===(a=n.user_metadata)||void 0===a?void 0:a.role;o.session&&g(r)})},[]);const g=e=>{var n,a;return e&&null!=t&&null!==(n=t[e])&&void 0!==n&&n.onTrue?(0,o.navigate)(t[e].onTrue):e&&null!=t&&null!==(a=t[e])&&void 0!==a&&a.onFalse?(0,o.navigate)(t[e].onFalse):void(0,o.navigate)("/event/aid/checkout")},f=async()=>{var e,t,n;const{data:a}=await l.ND.auth.getSession();(0,i.Uf)();const o=null===(e=a.session)||void 0===e||null===(t=e.user)||void 0===t||null===(n=t.user_metadata)||void 0===n?void 0:n.role;d("Login successful"),setTimeout(()=>g(o),900)},p=e=>{d(e||"Invalid credentials")},v=e=>{const{name:t,value:n,type:a,checked:o}=e.target;u(e=>({...e,[t]:"checkbox"===a?o:n}))},y=c;return a.createElement("div",{style:y.page},a.createElement("div",{style:y.card},a.createElement("div",{style:y.header},a.createElement("h1",{style:y.logo},"AID"),a.createElement("p",{style:y.tagline},"A.I. Director")),a.createElement("form",{onSubmit:e=>{e.preventDefault(),(0,i.ID)(),Object.keys(localStorage).forEach(e=>{e.startsWith("sb-")&&localStorage.removeItem(e)}),(0,s.mg)({email:n.email,password:n.password,onSuccess:f,onFail:p})},style:y.form},a.createElement("div",{style:y.field},a.createElement("label",{style:y.label},"Email"),a.createElement("input",{style:y.input,type:"email",name:"email",value:n.email,onChange:v,required:!0})),a.createElement("div",{style:y.field},a.createElement("label",{style:y.label},"Password"),a.createElement("input",{style:y.input,type:"password",name:"password",value:n.password,onChange:v,required:!0})),a.createElement("div",{style:y.row},a.createElement("label",{style:y.checkbox},a.createElement("input",{type:"checkbox",name:"remember",checked:n.remember,onChange:v}),"Remember me"),a.createElement("a",{href:"/reset-password",style:y.link},"Forgot?")),a.createElement("button",{type:"submit",style:y.button},"Sign In ",a.createElement(r.dyV,null)),m&&a.createElement("div",{style:y.message},m)),a.createElement("div",{style:y.footer},"Donâ€™t have an account? ",a.createElement("a",{href:"/sign-up",style:y.link},"Create one"))))};const c={page:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#ffffff",color:"black",fontFamily:"-apple-system, BlinkMacSystemFont, SF Pro Text, Helvetica Neue, Arial"},card:{width:380,padding:"2.5rem",borderRadius:16,border:"1px solid #e5e5e7",background:"#fff"},header:{marginBottom:"2rem",textAlign:"center"},logo:{margin:0,fontSize:"1.8rem",fontWeight:600},tagline:{marginTop:6,fontSize:"0.9rem",color:"#000"},form:{display:"flex",flexDirection:"column",gap:"1.2rem"},field:{display:"flex",flexDirection:"column"},label:{fontSize:"0.7rem",textTransform:"uppercase",fontWeight:600,marginBottom:6,letterSpacing:"0.05em",color:"black"},input:{padding:"0.7rem",borderRadius:8,border:"1px solid #d2d2d7",fontSize:"0.9rem"},row:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.85rem"},checkbox:{display:"flex",alignItems:"center",gap:6},button:{marginTop:"1rem",padding:"0.8rem",borderRadius:10,border:"none",background:"#000",color:"#fff",fontSize:"0.95rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8},link:{color:"#000",textDecoration:"none"},footer:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.85rem",color:"#000"},message:{marginTop:10,textAlign:"center",fontSize:"0.85rem"}}},599:function(e,t,n){n.d(t,{T4:function(){return i},mg:function(){return s},tp:function(){return c},vM:function(){return l},vx:function(){return r}});var a=n(6634),o=n(6898);const r=async function(e){let{onSuccess:t,onFail:n}=void 0===e?{}:e;console.log("ðŸ” Logging outâ€¦"),(0,a.nR)();const{error:r}=await o.ND.auth.signOut();if(r)return console.error("âŒ Logout error:",r),null==n?void 0:n(r.message);(0,a.nR)(),localStorage.removeItem("__thv_valid_supabase_keys__"),null==t||t()},l=async e=>{let{email:t,password:n,fullName:a,onSuccess:r,onFail:l}=e;const{data:s,error:i}=await o.ND.auth.signUp({email:t,password:n,options:{data:{full_name:a||"unknown",signup_source:"thv-web"}}});i?null==l||l(i.message):null==r||r()},s=async e=>{let{email:t,password:n,onSuccess:a,onFail:r}=e;const{data:l,error:s}=await o.ND.auth.signInWithPassword({email:t,password:n});s?null==r||r(s.message):null==a||a()},i=async e=>{let{email:t,onSuccess:n,onFail:a}=e;const{data:r,error:l}=await o.ND.auth.resetPasswordForEmail(t);l?null==a||a(l.message):null==n||n()},c=async e=>{let{newPassword:t,onSuccess:n,onFail:a}=e;const{data:r,error:l}=await o.ND.auth.updateUser({password:t});l?null==a||a(l.message):null==n||n()}},6634:function(e,t,n){function a(){return Object.keys(localStorage).filter(e=>e.startsWith("sb-")&&e.includes("-auth-token"))}function o(){const e=a();if(0===e.length)return;const t={};e.forEach(e=>t[e]=localStorage.getItem(e)||""),localStorage.setItem("__thv_valid_supabase_keys__",JSON.stringify(t))}function r(){const e=localStorage.getItem("__thv_valid_supabase_keys__");if(!e)return;const t=JSON.parse(e);Object.keys(t).forEach(e=>{localStorage.getItem(e)||(console.log("ðŸ›  Restoring missing Supabase key:",e),localStorage.setItem(e,t[e]))})}function l(){const e=JSON.parse(localStorage.getItem("__thv_valid_supabase_keys__")||"{}");a().forEach(t=>{e[t]||(console.log("ðŸ§¨ Removing stale Supabase key:",t),localStorage.removeItem(t))})}n.d(t,{ID:function(){return r},Uf:function(){return o},nR:function(){return l}})},8302:function(e,t,n){n.r(t);var a=n(6540),o=n(303);t.default=()=>a.createElement("div",null,a.createElement(o.A,{route:{admin:{onTrue:"/cms"}}}))}}]);
//# sourceMappingURL=component---src-pages-sign-in-tsx-95bdb4bfd03857ddcc14.js.map